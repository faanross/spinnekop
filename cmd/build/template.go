package main

const configGoTemplate = `// Code generated by cmd/build/main.go; DO NOT EDIT.
    package main
    
    import (
    	"github.com/faanross/spinnekop/internal/models" 
    )
    
    var embeddedAgentConfig = models.DNSRequest{
		Header:   Header,
		Question: Question,
		Resolver: Resolver,
		Answers:  Answers,
	}

	var Header = models.Header{
		ID:                          {{.Header.ID}},
		QR:                          {{.Header.QR}},
		OpCode:                      "{{.Header.OpCode}}",
		Authoritative:               {{.Header.Authoritative}},
		Truncated:                   {{.Header.Truncated}},
		RecursionDesired:            {{.Header.RecursionDesired}},
		RecursionAvailable:          {{.Header.RecursionAvailable}},
		Z:                           {{.Header.Z}},
		RCode:                       {{.Header.RCode}},
	}

	var Question = models.Question{
		Name:                        "{{.Question.Name}}",
		Type:                        "{{.Question.Type}}",
		Class:                       "{{.Question.Class}}",
		StdClass:                    {{.Question.StdClass}},
		CustomClass:                 {{.Question.CustomClass}},
	}

	var Resolver = models.Resolver{
		UseSystemDefaults:           {{.Resolver.UseSystemDefaults}},
		IP:                          "{{.Resolver.IP}}",
		Port:                        {{.Resolver.Port}},
	}

	var Answers = []models.Answer{
		{{if .Answers}}{{range .Answers}}{
			Name:  "{{.Name}}",
			Type:  "{{.Type}}",
			Class: "{{.Class}}",
			TTL:   {{.TTL}},
			Data:  "{{.Data}}",
		},
		{{end}}{{end}}
	}

    // getEmbeddedAgentConfig is called by the agent's main.go to retrieve this configuration.
    func getEmbeddedAgentConfig() models.DNSRequest {
    	return embeddedAgentConfig
    }

`
